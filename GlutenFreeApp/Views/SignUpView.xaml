<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="GlutenFreeApp.Views.SignUpView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewModels="clr-namespace:GlutenFreeApp.ViewModel"
    Title="SignUpView"
    x:DataType="viewModels:SignUpViewModel">
    <ScrollView>
    <VerticalStackLayout IsEnabled="{Binding NotInServerCall}">
        <!--  selector of type user  -->
        <Label
            Margin="0,0,0,20"
             FontFamily="TorontoFont"
             FontSize="40"
            HorizontalOptions="Center"
            Text="Select user type" />


        <Grid ColumnDefinitions="1*" RowDefinitions="1*,1*,1*,1*">

            <HorizontalStackLayout Grid.Row="0" HorizontalOptions="Center"  Spacing="50">
                <!--  Manager selection  -->
                <VerticalStackLayout Spacing="5">

                    <Button
                        x:Name="ManagerDot"
                        Padding="0"
                        BackgroundColor="Purple"
                        BorderColor="Gray"
                        Command="{Binding ManagerSelectedCommand}"
                        CornerRadius="12"
                        HeightRequest="24"
                        WidthRequest="24" />
                    <Label
                        FontSize="14"
                        HorizontalOptions="Center"
                        Text="Manager" />
                </VerticalStackLayout>



                <!--  Visitor Selection  -->

                <VerticalStackLayout Spacing="5">
                    <Button
                        x:Name="VisitorDot"
                        Padding="0"
                        BackgroundColor="Purple"
                        BorderColor="Gray"
                        Command="{Binding VisitorSelectedCommand}"
                        CornerRadius="12"
                        HeightRequest="24"
                        WidthRequest="24" />
                    <Label
                        FontSize="14"
                        HorizontalOptions="Center"
                        Text="Visitor" />
                </VerticalStackLayout>




            </HorizontalStackLayout>

            <!--  common fields for both  -->
            <VerticalStackLayout
                Grid.Row="1"
                Margin="0,20,0,0"
                Spacing="15">
                
                <Entry
                    x:Name="UsernameEntry"
                    Margin="0,20,0,0"
                    Placeholder="Username"
                    Text="{Binding Username}" />

                <Entry
                    x:Name="PasswordEntry"
                    IsPassword="True"
                    Placeholder="Password"
                    Text="{Binding Password}" />
                <Label IsVisible="{Binding ShowPasswordError}" Text="{Binding PasswordError}" />

                <Entry
                    x:Name="EmailEntry"
                    Placeholder="Email"
                    Text="{Binding UserEmail}" />
                <Label IsVisible="{Binding ShowEmailError}" Text="{Binding EmailError}" />



            </VerticalStackLayout>

            <!--  only manager fields  -->
            
            <VerticalStackLayout 
                x:Name="ManagerFields"
                Grid.Row="2"
                IsVisible="{Binding IsManager}"
                Spacing="20"
                Margin="0,20,0,0"
                >
                <Entry
                    x:Name="NameEntry"
                    Placeholder="Restaurant Name"
                    Text="{Binding RestName}" />

                <Entry
                    x:Name="AddressEntry"
                    Placeholder="Address"
                    Text="{Binding Address}" />

                <!--  לבדוק איך עושים בינדינג  -->

                <Label Text="Select Restaurant Food Type:"/>
                <Picker
                    x:Name="RestaurantTypePicker"
                    Title="Type of Restaurant"
                    
                    SelectedIndex="{Binding TypeFood}">
                    <Picker.Items>
                        <x:String>Italian</x:String>
                        <x:String>Asian</x:String>
                        <x:String>Mexican</x:String>
                        <x:String>BBQ</x:String>
                        <x:String>French</x:String>
                    </Picker.Items>
                </Picker>

                <!-- Photo -->
                <Frame BorderColor="Black" Padding="5" Margin="10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Image x:Name="theImageBug" Source="{Binding PhotoURL}"  HeightRequest="150"/>
                        <Label Grid.Row="1"
Text="Click Here To Upload Photo!"
TextColor="Blue"
HorizontalOptions="Center"
VerticalOptions="End">
                            <Label.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding UploadPhotoCommand}"/>
                            </Label.GestureRecognizers>
                        </Label>
                    </Grid>
                </Frame>


            </VerticalStackLayout>

           

            <!--  submit button  -->
            <Button
                x:Name="RegisterButton"
                Grid.Row="3"
                Margin="0,20,0,0"
                Command="{Binding SubmitCommand}"
                HorizontalOptions="Center"
                Text="Submit"
                BackgroundColor="Purple"
                WidthRequest="200" />

        </Grid>

        <!--  Centered ActivityIndicator  -->
        <ActivityIndicator
            HorizontalOptions="Center"
            IsRunning="{Binding InServerCall}"
            VerticalOptions="Center"
            Color="Red" />

    </VerticalStackLayout>


    </ScrollView>


</ContentPage>